<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="../css/nav.css" rel="stylesheet">
        <!-- <link href="./style.css" rel="stylesheet"> -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css" rel="stylesheet">
        <script src="../js/nav.js"></script>
        <script src="../js/code.jquery.com_jquery-3.7.0.min.js"></script>
        <link rel="icon" href="https://fav.farm/🐬" />

        <title>14-JavaScript References VS Copying</title>
        <script>
            function redropdownMenu(){
                const dropMenu = 
                document.querySelectorAll(".dropdown--menu");
                const dropSubMenu = 
                    document.querySelectorAll(".dropdown--submenu");
                    
                dropMenu.forEach((menu) => {
                    const menuRect = menu.getBoundingClientRect();
                    if (menuRect.right > window.innerWidth)
                    menu.style.right = 0;
                });
                dropSubMenu.forEach((subMenu) => {
                    const subMenuRect = subMenu.getBoundingClientRect();
                    if (subMenuRect.right > window.innerWidth)
                    subMenu.style.left = `${-subMenuRect.width}px`;
                });
            }
            window.addEventListener('resize', () =>{
                redropdownMenu();
            })
            document.addEventListener('DOMContentLoaded', () => {
                redropdownMenu();
            });
        </script>
        <style>
            .textbox {
                max-width: 700px;
                display: flex;
                flex-direction: column;
                margin: 70px auto;
                background: white;
                padding: 40px;
                text-align: justify;
                border-radius: 15px;
            }
            .textbox .context {
                border-top: 2px solid wheat;
                padding-top: 5px;
                margin: .3rem 0;
            }
        </style>
    </head>


    <body>
        <header class="header" id="header">
        </header>
        <script>
            let nv = $("#header");
            nv.html(nav);
        </script>
        <!-- Main js -->
        <script src="../js/main.js"></script>

        <div class="sbody">
            <div class="textbox">
                <h1>Script Note ._.</h1>
                <div class="context">
                    start with strings, numbers and booleans

                </div>
                <div class="context">
                    Let's say we have an array
                </div>

                <div class="context">
                    and we want ot make a copy of it.
                </div>

                <div class="context">
                    You might think ew can just do something like this:
                </div>

                <div class="context">
                    however what happens when we update that array?
                </div>

                <div class="context">
                    now here is the problem!
                </div>

                <div class="context">
                    oh no - we have edited the original array too!
                </div>

                <div class="context">
                    Why? It's because that is an array reference, not an array copy. They both point ot the same array!
                </div>

                <div class="context">
                    So, how do we fix this? We take a copy instead!
                </div>

                <div class="context">
                    one way
                </div>

                <div class="context">
                    or create a new array and concat the old one in 
                </div>

                <div class="context">
                    or use the new ES6 Spread
                </div>

                <div class="context">
                    now when we update it, the original one isn't changed
                </div>

                <div class="context">
                    The same thing goes for objects, let's  say we have a person object
                </div>

                <div class="context">
                    with Objects
                </div>

                <div class="context">
                    and think we make a copy:
                </div>

                <div class="context">
                    how do we take a copy instead?
                </div>

                <div class="context">
                    We will hopefully soon see the object ..spread
                </div>

                <div class="context">
                    Things to note - this is only 1 level deep - both for Arrays and Objects. lodash has cloneDeep method, but you should think twice before using it.
                </div>
            </div>
            

        </div>
        <script>
            // start with strings, numbers and booleans
            // let age = 100;
            // let age2 = age;
            // console.log(age, age2);
            // age = 200;
            // console.log(age, age2);

            // let name = 'Wes';
            // let name2 = name;
            // console.log(name, name2);
            // name = 'buke';
            // console.log(name, name2);

            // Let's say we have an array
            const players = ['Wes', 'Sarah', 'Ryan', 'Poppy'];


            // and we want ot make a copy of it.
            const team = players;

            console.log(players, team);

            // You might think ew can just do something like this:
            // team[3] = 'Lux';

            // however what happens when we update that array?

            // now here is the problem!

            //  oh no - we have edited the original array too!

            // Why? It's because that is an array reference, not an array copy. They both point ot the same array!

            // So, how do we fix this? We take a copy instead!
            const team2 = players.slice();
            
            // one way
            
            // or create a new array and concat the old one in 
            const team3 = [].concat(players);
            
            // or use the new ES6 Spread
            const team4 = [...players]
            team4[3] = 'heee hawww';
            console.log(team4);

            const team5 = Array.from(players);


            // now when we update it, the original one isn't changed

            // The same thing goes for objects, let's  say we have a person object

            // with Objects
            const person = {
                name: 'Web buke',
                age: 80
            };



            // and think we make a copy:
            // const catain = person;
            // catain.number = 99;


            // how do we take a copy instead?
            const cap2 = Object.assign({}, person, {number: 99,age: 12 });
            console.log(cap2);
            
            // We will hopefully soon see the object ..spread
            // const cap3 = {...person};


            // Things to note - this is only 1 level deep - both for Arrays and Objects. lodash has cloneDeep method, but you should think twice before using it.

            const wes = {
                name: 'buke',
                age: 100,
                social: {
                    twitter: '@webbuke',
                    fecebook: 'buke.developer'
                }
            };
            console.clear();
            console.log(wes);

            const dev = Object.assign({},wes);

            const dev2 = JSON.parse(JSON.stringify(wes));

        </script>
    </body>
</html>